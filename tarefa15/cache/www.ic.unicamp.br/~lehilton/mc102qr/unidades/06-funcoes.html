<!DOCTYPE html>

<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Algoritmos e Programação de Computadores
    - Funções
  </title>

  <meta name="keywords" content="MC102, Algoritmos e Programação de Computadores, Python">
  <meta name="description" content="Página da disciplina de MC102 para turma QR">
  <meta name="author" content="Lehilton Pedrosa">

  <!-- Bootstrap core CSS -->
  <link href="../dist/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Theme css -->
  <link href="../dist/css/main.min.css" rel="stylesheet">

  <!-- Prism -->
  <!-- <link href="../dist/vendor/prism/prism.css" rel="stylesheet" /> -->
</head>
<body >

  <body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="../index.html">MC102</a>


    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i>&#9776;</i>
    </button>

    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">

        <li class="nav-item top back-to-top-link">
          <a class="nav-link" href="#"><span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>topo</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="../index.html">voltar</a>
        </li>


      </ul>
    </div>
  </div>
</nav>

<!-- Page Header -->
<header class="masthead"   style="background-image: url('../images/home-bg.jpg')" >
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">

          <h1 >Funções</h1>


          <span class="meta">Quinta, 16 de abril de 2020</span>

        </div>
      </div>
    </div>
  </div>
</header>
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">


      <div class="col-lg-8 col-md-10 mx-auto">

        <p><strong>Instruções</strong>: Enquanto você lê, você deve acompanhar os exemplos
utilizando um console e Python. Para essa unidade, você deve ler a
seção 4.6 sobre funções do
<a href="https://docs.python.org/pt-br/3/tutorial/index.html">tutorial</a>
Python. Discutiremos alguns exemplos sobre a importância de funções e
sobre como utilizá-las efetivamente. Depois, você deverá ler sobra as
demais funcionalidades de função em Python (do início da seção 4.7 até
4.7.3).</p>
<hr />
<p>Vamos retomar o exemplo de nossa calculadora, mas agora vamos adicionar
outras operações operações.</p>
<pre class="highlightlanguage-python">
<span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000; font-weight: bold">True</span>:
    operador <span style="color: #666666">=</span> <span style="color: #008000">input</span>()
    <span style="color: #008000; font-weight: bold">if</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;+&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        soma <span style="color: #666666">=</span> num1 <span style="color: #666666">+</span> num2
        <span style="color: #008000">print</span>(soma)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;-&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        diferenca <span style="color: #666666">=</span> num1 <span style="color: #666666">-</span> num2
        <span style="color: #008000">print</span>(diferenca)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;*&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        produto <span style="color: #666666">=</span> num1 <span style="color: #666666">*</span> num2
        <span style="color: #008000">print</span>(produto)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;/&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        <span style="color: #008000; font-weight: bold">if</span> num2 <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Divisor não pode ser zero&quot;</span>)
            <span style="color: #008000; font-weight: bold">continue</span>
        produto <span style="color: #666666">=</span> num1 <span style="color: #666666">/</span> num2
        <span style="color: #008000">print</span>(produto)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;F&quot;</span>:
        <span style="color: #008000; font-weight: bold">break</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Operação inválida&quot;</span>)
</pre><p>Observe que usamos um comando <code class="language-text">continue</code>. Essa instrução termina a
iteração atual do laço, mas ao contrário de <code class="language-text">break</code>, continua na
próxima iteração. Assim, imediatamente após executar <code class="language-text">continue</code>, o
interpretador irá voltar a verificar a condição do <code class="language-text">while</code>.</p>
<p>Perceba que o programa começa a ficar muito grande e já não cabe em
muitas telas, mas ainda é razoavelmente simples e a maioria dos
programadores não teria dificuldades em ler esse código. No entanto, à
medida que adicionamos operações, a situação fica um pouco mais
complicada.</p>
<p>Queremos que nossa calculadora seja mais útil do que as calculadoras
de mesa tradicionais, então vamos adicionar duas operações, uma menos
trivial do que a outra: a raiz quadrada e as raízes de uma equação do
segundo grau.</p>
<p>Para calcular a raiz quadrada, vamos de novo importar um módulo <code class="language-text">math</code>,
então adicionamos no início no arquivo</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span>
</pre><p>Com isso, basta basta escolher um nome para a operação apropriado e
adicionar mais algumas linhas no corpo do <code class="language-text">while</code>.</p>
<pre class="highlightlanguage-python">    <span style="color: #408080; font-style: italic"># ....</span>
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;sqrt&quot;</span>:
        num <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        raiz <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(num)
        <span style="color: #008000">print</span>(raiz)
    <span style="color: #408080; font-style: italic"># ...</span>
</pre><p>A segunda operação — encontrar as raízes de uma equação do segundo
grau — diverge das operações anteriores, pois não há função
prontamente disponível em Python, e precisamos de um número de
instruções um pouco maior. Primeiro, lembramos que
uma equação do segundo grau é escrita como</p>
<p>$$
ax^2 + bx + c = 0
$$</p>
<p>Desde muito sabemos como encontrar o valor de $x$. Primeiro, calculamos
o valor do discriminante</p>
<p>$$
\Delta = b^2 - 4ac
$$</p>
<p>Com o valor de $\Delta$, podemos determinar quantas e quais são as
soluções da equação. A fórmula para isso é</p>
<p>$$
x = \frac{-b \pm \sqrt{\Delta}}{2a}
$$</p>
<p>que é popularmente conhecida como fórmula de Bhaskara. Adicionamos
o seguinte ao corpo da função</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000; font-weight: bold">True</span>:
    <span style="color: #408080; font-style: italic"># ....</span>
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;bhaskara&quot;</span>:
        a <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        b <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        c <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        delta <span style="color: #666666">=</span> b<span style="color: #666666">*</span>b <span style="color: #666666">-</span> <span style="color: #666666">4</span> <span style="color: #666666">*</span> a <span style="color: #666666">*</span> c
        <span style="color: #008000; font-weight: bold">if</span> delta <span style="color: #666666">&lt;</span> <span style="color: #666666">0</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Não há raízes reais&quot;</span>)
            <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">elif</span> delta <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Há uma raiz distinta apenas&quot;</span>)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Há duas raízes distintas&quot;</span>)
        x1 <span style="color: #666666">=</span> (<span style="color: #666666">-</span>b <span style="color: #666666">+</span> math<span style="color: #666666">.</span>sqrt(delta)) <span style="color: #666666">/</span> (<span style="color: #666666">2</span> <span style="color: #666666">*</span> a)
        x1 <span style="color: #666666">=</span> (<span style="color: #666666">-</span>b <span style="color: #666666">-</span> math<span style="color: #666666">.</span>sqrt(delta)) <span style="color: #666666">/</span> (<span style="color: #666666">2</span> <span style="color: #666666">*</span> a)
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;As raízes são </span><span style="color: #BB6688; font-weight: bold">{x1}</span><span style="color: #BA2121"> e </span><span style="color: #BB6688; font-weight: bold">{x2}</span><span style="color: #BA2121">&quot;</span>)
    <span style="color: #408080; font-style: italic"># ...</span>
</pre><p>Se tentarmos olhar para todo o programa, teremos
uma surpresa:</p>
<pre class="highlightlanguage-python">
<span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000; font-weight: bold">True</span>:
    operador <span style="color: #666666">=</span> <span style="color: #008000">input</span>()
    <span style="color: #008000; font-weight: bold">if</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;+&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        soma <span style="color: #666666">=</span> num1 <span style="color: #666666">+</span> num2
        <span style="color: #008000">print</span>(soma)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;-&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        diferenca <span style="color: #666666">=</span> num1 <span style="color: #666666">-</span> num2
        <span style="color: #008000">print</span>(diferenca)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;*&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        produto <span style="color: #666666">=</span> num1 <span style="color: #666666">*</span> num2
        <span style="color: #008000">print</span>(produto)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;/&quot;</span>:
        num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        <span style="color: #008000; font-weight: bold">if</span> num2 <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Divisor não pode ser zero&quot;</span>)
            <span style="color: #008000; font-weight: bold">continue</span>
        produto <span style="color: #666666">=</span> num1 <span style="color: #666666">/</span> num2
        <span style="color: #008000">print</span>(produto)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;sqrt&quot;</span>:
        num <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        raiz <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(num)
        <span style="color: #008000">print</span>(raiz)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;bhaskara&quot;</span>:
        a <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        b <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        c <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        delta <span style="color: #666666">=</span> b <span style="color: #666666">*</span> b <span style="color: #666666">-</span> <span style="color: #666666">4</span> <span style="color: #666666">*</span> a <span style="color: #666666">*</span> c
        <span style="color: #008000; font-weight: bold">if</span> delta <span style="color: #666666">&lt;</span> <span style="color: #666666">0</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Não há raízes reais&quot;</span>)
            <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">elif</span> delta <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Há uma raiz distinta apenas&quot;</span>)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Há duas raízes distintas&quot;</span>)
        x1 <span style="color: #666666">=</span> (<span style="color: #666666">-</span>b <span style="color: #666666">+</span> math<span style="color: #666666">.</span>sqrt(delta)) <span style="color: #666666">/</span> (<span style="color: #666666">2</span> <span style="color: #666666">*</span> a)
        x1 <span style="color: #666666">=</span> (<span style="color: #666666">-</span>b <span style="color: #666666">-</span> math<span style="color: #666666">.</span>sqrt(delta)) <span style="color: #666666">/</span> (<span style="color: #666666">2</span> <span style="color: #666666">*</span> a)
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;As raízes são </span><span style="color: #BB6688; font-weight: bold">{x1}</span><span style="color: #BA2121"> e </span><span style="color: #BB6688; font-weight: bold">{x2}</span><span style="color: #BA2121">&quot;</span>)
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;F&quot;</span>:
        <span style="color: #008000; font-weight: bold">break</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Operação inválida&quot;</span>)
</pre><p>Dessa vez, tenho certeza de que todo o código não cabe em uma única
tela de seu editor. Mais importante do que isso, é extremamente
difícil ler esse código e entender o que está acontecendo! O motivo,
além do tamanho, é que para entender o código acima precisamos
nos preocupar, ao mesmo tempo, com diversos problemas distintos:</p>
<ul>
<li>como controlar um menu de operações ao usuário?</li>
<li>como ler e mostrar os dados de uma operação de soma, subtração etc.?</li>
<li>como obter as raízes de uma equação de segundo grau?</li>
</ul>
<p>Como estamos fazendo tudo isso de maneira intercalada, ao lermos esse
código, ora nos preocumos com o <code class="language-text">while</code>, ora com a entrada e saída,
ora com a fórmula de Bhaskara. Pior! Se houver um erro na lógica do
nosso programa, vamos gastar bastante tempo tentando descobrir onde
ele está.</p>
<h1 id="funcoes">Funções</h1>
<p>Para resolver esse problema, vamos criar uma abstração para conjunto
de instruções dedicadas a resolver uma determinada tarefa. Vamos
<strong>reescrever</strong> ou <strong>refatorar</strong> o programa. Vamos adotar uma
estratégia de resolver os problemas mais gerais primeiro, e depois os
mais específicos (algumas pessoas chamam a isso de estratégia
<em>top-down</em>).</p>
<p>Primeiro precisamos descobrir qual a tarefa principal do programa,
isso é, qual é o conjunto de instruções deve ser executado ao iniciar
o programa. Nesse exemplo, a primeira instrução é <code class="language-text">while</code>, que é
responsável pelo controle das operações digitadas pelo usuário. Vamos
então nos concentrar nesse problema e <strong>esconder</strong> todos os demais.
Escrevemos o seguinte:</p>
<pre class="highlightlanguage-python">
<span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000; font-weight: bold">True</span>:
    operador <span style="color: #666666">=</span> <span style="color: #008000">input</span>()
    <span style="color: #008000; font-weight: bold">if</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;+&quot;</span>:
        operacao_soma()
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;-&quot;</span>:
        operacao_diferenca()
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;*&quot;</span>:
        operacao_multiplicacao()
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;/&quot;</span>:
        operacao_divisao()
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;sqrt&quot;</span>:
        operacao_raiz()
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;bhaskara&quot;</span>:
        operacao_bhaskara()
    <span style="color: #008000; font-weight: bold">elif</span> operador <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;F&quot;</span>:
        <span style="color: #008000; font-weight: bold">break</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Operação inválida&quot;</span>)
</pre><p>Agora fica muito mais simples entender o que esse código faz: ele lê
uma linha do teclado e realiza uma operação de acordo com o que o
usuário digitar. É claro que <code class="language-text">operacao_soma</code>, <code class="language-text">operacao_diferenca</code>
etc. não são instruções da linguagem Python. Cada um desses nomes é
uma <strong>abstração</strong>: aqui, abstrair significa esconder os detalhes de
como realizar um determinada operação.</p>
<p>Se tentarmos executar um código assim iríamos obter uma mensagem de
erro do interpretador dizendo que algum nome não está definido, como
se ele reclamasse, &quot;não sei do que você está falando&quot;. Vamos então
definir cada um desses nomes. Para isso, antes do <code class="language-text">while</code>, adicione</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_soma</span>():
    <span style="color: #008000; font-weight: bold">pass</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_diferenca</span>():
    <span style="color: #008000; font-weight: bold">pass</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_produto</span>():
    <span style="color: #008000; font-weight: bold">pass</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_divisao</span>():
    <span style="color: #008000; font-weight: bold">pass</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_raiz</span>():
    <span style="color: #008000; font-weight: bold">pass</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_bhaskara</span>():
    <span style="color: #008000; font-weight: bold">pass</span>
</pre><p>O que estamos fazendo é definir diversas novas <strong>funções</strong>. Uma função
é um conjunto de instruções realiza determinada tarefa identificada
por um nome. As funções acima são só <em>stubs</em>, que são funções
incompletas. O motivo para criar stub é poder testar o código do
programa principal enquanto ainda estamos desenvolvendo nosso
programa.</p>
<p>Depois de terminado o trecho de código do programa principal, devemos
implementar cada uma das funções definidas acima. Implementar uma
função significa escrever o conjunto de instruções que realiza a
tarefa correspondente. Uma das vantagens de definir e usar funções é
que é muito mais fácil implementar tarefas pequenas, uma de cada vez,
do que tentar resolver todo o problema de uma vez. Para a função
<code class="language-text">operacao_soma</code> basta copiar as instruções do código original:</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_soma</span>():
    num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    soma <span style="color: #666666">=</span> num1 <span style="color: #666666">+</span> num2
    <span style="color: #008000">print</span>(soma)
</pre><p>Você deve fazer o mesmo para as operações de diferença e produto. Para
a operação de divisão, no entanto, precisamos tomar um cuidado a mais.
Copiando o código original, teríamos:</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_divisao</span>():
    num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    <span style="color: #008000; font-weight: bold">if</span> num2 <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Divisor não pode ser zero&quot;</span>)
        <span style="color: #008000; font-weight: bold">continue</span>
    produto <span style="color: #666666">=</span> num1 <span style="color: #666666">/</span> num2
    <span style="color: #008000">print</span>(produto)
</pre><p>O problema do código acima é que a instrução <code class="language-text">continue</code> só faz sentido
dentre do corpo de um comando <code class="language-text">for</code> ou <code class="language-text">while</code>. O que queremos, nesse
caso, é terminar a função e retornar ao menu. Para isso, existe a
instrução <code class="language-text">return</code> que termina a função que a contém e continua a
execução imediatamente depois do ponto de chamada.</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_divisao</span>():
    num1 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    num2 <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    <span style="color: #008000; font-weight: bold">if</span> num2 <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;Divisor não pode ser zero&quot;</span>)
        <span style="color: #008000; font-weight: bold">return</span>
    produto <span style="color: #666666">=</span> num1 <span style="color: #666666">/</span> num2
    <span style="color: #008000">print</span>(produto)
</pre><p>Faça o mesmo para operação para obter raízes da equação.</p>
<h1 id="passando-argumentos-e-devolvendo-valores">Passando argumentos e devolvendo valores</h1>
<p>Vamos olhar como ficaria a função para a operação da raiz:</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_raiz</span>():
    num <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    raiz <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(num)
    <span style="color: #008000">print</span>(raiz)
</pre><p>A expressão <code class="language-text">math.sqrt(num)</code> é uma chamada a uma função de nome <code class="language-text">sqrt</code>
importada com o módulo <code class="language-text">math</code>. Repare que o radiando é passado como
parâmetro da função é a raiz é obtida, assim, a função <code class="language-text">sqrt</code>
funciona, de fato, como uma função matemática, que tem uma entrada e
devolve uma saída.</p>
<p>Embora calcular a raiz quadrada já é uma função própria de uma
biblioteca padrão do Python, ela não é uma instrução elementar dos
nossos computadores modernos. Como bons computeiros, devemos ter o
espírito curioso de descobrir como uma tal operação complexa pode ser
computada a partir de operações elementares (soma, subtração,
multiplicação e divisão).</p>
<p>Há vários métodos conhecidos e você deve ter já estudado pelo menos um
na escola. Nesse exemplo, vamos usar o método de Newton. Como essa é
uma operação complicada, primeiro vamos criar um stub para poder
modificar o código de <code class="language-text">operacao_raiz</code>. Fazemos o seguinte:</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">minha_sqrt</span>(radiando):
    raiz <span style="color: #666666">=</span> radiando <span style="color: #666666">/</span> <span style="color: #666666">2</span> <span style="color: #408080; font-style: italic"># TODO: implementar método de Newton</span>
    <span style="color: #008000; font-weight: bold">return</span> raiz

<span style="color: #408080; font-style: italic"># ...</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operacao_raiz</span>():
    num <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
    raiz <span style="color: #666666">=</span> minha_sqrt(num)
    <span style="color: #008000">print</span>(raiz)
</pre><p>A função <code class="language-text">minha_sqrt</code> é só um stub, mas ela ilustra dois conceitos
novos:</p>
<ul>
<li>
<p>Uma função pode receber um ou mais <strong>parâmetros</strong>. Um parâmetro é
uma variável que se refere a algum valor passado entre os parênteses
quando chamamos a função. Esse pode ser o valor de qualquer
expressão, seja uma simples variável como em <code class="language-text">minha_sqrt(num)</code>, mas
pode ser também uma expressão mais complicada, como em
<code class="language-text">minha_sqrt(b*b - 4*a*c)</code>.</p>
</li>
<li>
<p>Uma função pode <strong>devolver</strong> um valor ao retornar ao local de
origem. Esse valor é escrito após o <code class="language-text">return</code>. O valor devolvido por
uma função tem um tipo determinado e pode ser utilizado em qualquer
expressão onde uma variável do mesmo tipo poderia ser utilizado. Por
exemplo, o valor pode ser atribuído a uma variável, como em
<code class="language-text">raiz = minha_sqrt(num)</code> ou utilizado em uma expressão mais
complicada, como em <code class="language-text">x = (-b + minha_sqrt(b*b - 4*a*c)) / (2*a)</code>.</p>
</li>
</ul>
<p>Agora que já organizamos nosso programa em funções, podemos nos
concentrar em implementar o método de Newton. Observe que fizemos um
comentário que começa com <code class="language-text"># TODO: ...</code>. É comum criar comentários
como esse ou <code class="language-text"># FIXME: ....</code> para indicar trechos de código que
merecem atenção posterior. Outra maneira, para projetos grandes, é
anotar um <code class="language-text">bug</code> num gerenciador de tarefas (como bugzilla, issues,
etc.). Revise o <a href="https://pt.wikipedia.org/wiki/M%C3%A9todo_de_Newton%E2%80%93Raphson">método de Newton</a>
e implemente a função (você pode achar mais fácil resolver o <a href="../fixacao/03-repeticao.html">exercício
correspondente</a>).</p>
<h1 id="repeticao-de-codigo">Repetição de código</h1>
<p>Vamos resolver mais um exercício:</p>
<blockquote>
<p>Escreva um programa que recebe um número inteiro e decide se ele é
um produto de dois números primos.</p>
</blockquote>
<p>Antes de começar, vamos listar as duas pequenas tarefas que
devemos fazer:</p>
<ol>
<li>controlar a entrada e saída do programa</li>
<li>verificar se um número é produto de dois primos</li>
</ol>
<p>Novamente, precisamos identificar qual delas é a tarefa principal,
isso é, que será executada primeiro quando o programa começar. Em
grande parte de nossos problemas essa vai ser sempre a tarefa de ler
os dados de entrada, realizar algumas operações e mostrar os dados de
saída. Nesse caso, vamos fazer o seguinte::</p>
<pre class="highlightlanguage-python">
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    n <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">input</span>(<span style="color: #BA2121">&quot;Digite um número inteiro: &quot;</span>))
    <span style="color: #008000; font-weight: bold">if</span> eh_produto_dois_primos(n):
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;O número </span><span style="color: #BB6688; font-weight: bold">{n}</span><span style="color: #BA2121"> é produto de dois primos.&quot;</span>)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;O número </span><span style="color: #BB6688; font-weight: bold">{n}</span><span style="color: #BA2121"> não é produto de dois primos.&quot;</span>)

main()
</pre><p>Observe que definimos uma função chamada <code class="language-text">main</code> e que adicionamos uma
chamada a essa função na última linha do programa, que é a única
instrução do programa que não está dentro de uma função. Sempre que
nosso problema não for trivial, vamos preferir organizar nossos
programas dessa maneira. O nome <code class="language-text">main</code> é uma convenção e serve para
identificar facilmente qual é a função principal do programa.</p>
<p>Para entender esse programa, precisamos investigar a linha que contém
<code class="language-text">if eh_produto_dois_primos(n):</code>. O que está implícito aqui é que
<code class="language-text">eh_produto_dois_primos</code> é uma função que devolve um valor booleano
dependendo se o número <code class="language-text">n</code> passado como parâmetro é produto de dois
primos. Para podermos deduzir isso foi fundamental que o <strong>nome da
função</strong> fosse bem representativo do que ela faz e do que ela devolve.</p>
<p>Para poder testar a função <code class="language-text">main</code>, faremos um stub.</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">eh_produto_dois_primos</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve True se o argumento n puder</span>
<span style="color: #BA2121; font-style: italic">    ser escrito como um produto de dois primos&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">True</span>
</pre><p>A novidade nesse programa é que adicionamos uma string na primeira
linha da função. Essa string não é associada a nenhuma variável e não
tem nenhum efeito. O motivo de adicionarmos é que ela serve para
documentar o que a função faz. Por mais que uma função tenha (e deva
ter) um bom nome, nem sempre é claro o que cada função faz,
particularmente se voltarmos a ler nosso código depois de alguns dias.
Essas strings são denominadas <em>strings de documentação</em> ou
<em>documentation strings</em>.</p>
<p>Quando testarmos o programa com qualquer número, digamos,
100, obteremos sempre uma mensagem como</p>
<pre class="highlight">O número 100 é produto de dois primos.
</pre><p>independentemente do número lido. Para testar o conjunto de instruções
correspondentes ao <code class="language-text">else</code> da função <code class="language-text">main</code> podemos mudar o nosso stub.
Mas agora, já podemos implementar a função de fato. Antes, vamos
escrever um algoritmo, em bem alto nível.</p>
<ol>
<li>
para cada número $q$ em $1, 2, ...., n$:<ul>
<li>
se $n$ for divisível por $q$:<ul>
<li>faça $r \gets n / q$</li>
<li>verifique se $q$ é primo</li>
<li>verifique se $r$ é primo</li>
<li>
se ambos forem primos<ul>
<li>responda SIM</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>se não tiver terminado, responda NÃO</li>
</ol>
<p>Você pode só acreditar que esse algoritmo está correto, ou pode tentar
se convencer de que está. Um bom computeiro tenta entender bem o que
um algoritmo faz antes de tentar codificá-lo. Para isso, teste com
algumas instâncias pequenas utilizando lápis e papel. Quando
estivermos confiantes de que o o algoritmo está correto, podemos
passar à implementação.</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">eh_produto_dois_primos</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve True se o argumento n puder</span>
<span style="color: #BA2121; font-style: italic">    ser escrito como um produto de dois primos&quot;&quot;&quot;</span>

    produto_primos <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>
    <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">1</span>, n <span style="color: #666666">+</span> <span style="color: #666666">1</span>):
        <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #666666">%</span> q <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            r <span style="color: #666666">=</span> n <span style="color: #666666">//</span> q

            r_eh_primo <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
            <span style="color: #008000; font-weight: bold">for</span> d <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">2</span>, r):
                <span style="color: #008000; font-weight: bold">if</span> r <span style="color: #666666">%</span> d <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
                    r_eh_primo <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>
                    <span style="color: #008000; font-weight: bold">break</span>

            q_eh_primo <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
            <span style="color: #008000; font-weight: bold">for</span> d <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">2</span>, q):
                <span style="color: #008000; font-weight: bold">if</span> r <span style="color: #666666">%</span> d <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
                    q_eh_primo <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>
                    <span style="color: #008000; font-weight: bold">break</span>

            <span style="color: #008000; font-weight: bold">if</span> r_eh_primo <span style="color: #AA22FF; font-weight: bold">and</span> q_eh_primo:
                produto_primos <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
                <span style="color: #008000; font-weight: bold">break</span>

    <span style="color: #008000; font-weight: bold">return</span> produto_primos
</pre><p>Leia com atenção e copie essa função no seu programa. Podemos testar o
programa digitando o número <code class="language-text">15</code> que é um produto de dois primos <code class="language-text">3</code> e
<code class="language-text">5</code>. Ao verificar a saída iremos ver que o programa imprimiu
corretamente</p>
<pre class="highlight">O número 15 é produto de dois primos.
</pre><p>Se testarmos com outros <code class="language-text">10</code> ou <code class="language-text">4</code>, o programa também responderá
corretamente. Mas devolver a resposta correta para alguns exemplos não
significa que o programa está correto. Na verdade, não importa qual
número inteiro fornecermos, o programa sempre responderá que ele é
produto de dois primos. Isso não é verdade quando a resposta é não,
como para o número <code class="language-text">8</code> ou o número <code class="language-text">20</code>.</p>
<p>Concluímos duas coisas: primeiro, nosso programa está errado, segundo,
é importante testar nossos programas com vários exemplos de entrada,
particularmente para entradas que fornecem saídas diferentes.</p>
<p>Para descobrir onde está o erro do programa, podemos usar diversas estratégias, como simulá-lo com um debugger, ou ler o código
lentamente com atenção. Se você já não descobriu o erro, pare um pouco
e tendo descobri-lo.</p>
<p>Uma vez descoberto o erro, precisamos corrigi-lo. Mais importante,
precisamos entender porque esse erro ocorreu para início de conversa.
O erro é um erro de digitação na segunda ocorrência de
<code class="language-text">if r % d == 0:</code> que deveria ser <code class="language-text">if q % d == 0:</code>. Como você deve
adivinhar, isso ocorreu porque temos dois trechos de código muito
parecidos e o segundo foi obtido copiando e modificando o primeiro,
mas esquecemos de modificar uma linha.</p>
<p>Esse exemplo descreve o que chamamos de <strong>duplicidade de código</strong>, que
é uma situação extremamente comum no desenvolvimento de software.
Muitas vezes, cada trecho de código tem papeis similares, mas para
parâmetros diferentes. No exemplo acima, queremos decidir se um dado
número (<code class="language-text">r</code> ou <code class="language-text">q</code>) é primo. Em situações como essa, devemos refatorar
o código e definirmos uma função. Reescrevemos assim.</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">eh_primo</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Verifica se n é primo&quot;&quot;&quot;</span>

    eh_primo <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
    <span style="color: #008000; font-weight: bold">for</span> d <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">2</span>, n):
        <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #666666">%</span> d <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            eh_primo <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>
            <span style="color: #008000; font-weight: bold">break</span>
    <span style="color: #008000; font-weight: bold">return</span> eh_primo

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">eh_produto_dois_primos</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve True se o argumento n puder</span>
<span style="color: #BA2121; font-style: italic">    ser escrito como um produto de dois primos&quot;&quot;&quot;</span>

    produto_primos <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>
    <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">1</span>, n <span style="color: #666666">+</span> <span style="color: #666666">1</span>):
        <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #666666">%</span> q <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            r <span style="color: #666666">=</span> n <span style="color: #666666">//</span> q
            <span style="color: #008000; font-weight: bold">if</span> eh_primo(r) <span style="color: #AA22FF; font-weight: bold">and</span> eh_primo(q):
                produto_primos <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
                <span style="color: #008000; font-weight: bold">break</span>

    <span style="color: #008000; font-weight: bold">return</span> produto_primos
</pre><p>Deve ser evidente que a nova versão é mais simples e muito mais
compacta. Dessa vez, não há repetição de código. Testando para o
número <code class="language-text">8</code> vemos que, agora sim, ele responde corretamente que não é
produto de dois primos.</p>
<p>Infelizmente, como você já pode desconfiar, esse programa não está
correto. Estude o programa e tente determinar para que exemplos esse
programa devolve a saída incorreta! Depois, corrija seu programa. Ao
terminar esse exercício você vai descobri mais uma vantagem de ter
refatorado o programa com uma nova função, ao invés de manter as duas
cópias praticamente idênticas de um conjunto de instruções.</p>
<h1 id="criando-e-organizando-seu-programa">Criando e organizando seu programa</h1>
<p>Vamos resolver mais um problema para nos exercitar.</p>
<blockquote>
<p>Crie um programa que leia duas listas do teclado, correspondentes às
notas de provas e de exercícios dos estudantes, normaliza cada nota
dividindo-se a nota pelo máximo da lista correspondente e computa a
média final de cada estudante, que é dada pela média geométrica
entre a nota de prova e de exercícios.</p>
</blockquote>
<p>Você deve tentar fazer todo esse programa por conta própria.
Para isso, procure seguir a mesma estratégia que seguimos antes:</p>
<ol>
<li>Leia o enunciado e procure entender o que é pedido. Para isso,
tente formalizar entrada e saída e crie alguns exemplos. Depois,
faça uma lista de todas as tarefas curtas que precisam ser
realizadas para se resolver esse problema.</li>
<li>Identifique a tarefa principal responsável por controlar entrada e
saída e crie uma função <code class="language-text">main</code> utilizando chamadas para funções
auxiliares quando quiser abstrair pequenas tarefas.</li>
<li>Crie funções stubs para cada função auxiliar necessária.
Certifique-se de que os nomes das funções sejam adequados para as
tarefas que abstraídas. Não se esqueça de documentar as funções
identificando a entrada e a saída sempre que necessário.</li>
<li>Teste a função principal verificando as instruções que controlam a
entrada e a saída da função.</li>
<li>Implemente cada stub definido. Lembre-se de escrever antes um
algoritmo em português, testar e, só depois, traduzi-los a
linguagem Python. Procure testar seu programa a cada função
implementada.</li>
</ol>
<p>Em seguida eu mostro como eu resolveria esse problema. <strong>Não leia</strong>
esse código enquanto não tiver terminado o seu próprio programa. Seu
programa pode divergir completamente do código abaixo, mas isso não
significa que uma maneira é mais correta do que a outra. Procure
analisar criticamente as diferenças. Uma peculiaridade da Computação é
que, embora seja uma ciência dita exata, os algoritmos são tão
distintos quanto seus próprios programadores. Tanto que alguns diriam
que programação é uma
<a href="https://en.wikipedia.org/wiki/The_Art_of_Computer_Programming">arte</a>!</p>
<pre class="highlightlanguage-python"><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">Calcula as médias finais dos estudantes.</span>

<span style="color: #BA2121; font-style: italic">Entrada:</span>
<span style="color: #BA2121; font-style: italic">- uma linha com o número n de estudantes</span>
<span style="color: #BA2121; font-style: italic">- n linhas correspondentes às notas de provas</span>
<span style="color: #BA2121; font-style: italic">- n linhas correspondentes às notas de exercícios</span>

<span style="color: #BA2121; font-style: italic">Saída:</span>
<span style="color: #BA2121; font-style: italic">- n linhas correspondentes às medias finais</span>
<span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>

<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ler_lista_numeros</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Lê uma lista de n números do teclado&quot;&quot;&quot;</span>
    lista <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> _ <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        numero <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        lista<span style="color: #666666">.</span>append(numero)
    <span style="color: #008000; font-weight: bold">return</span> lista

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">imprimir_lista_numeros</span>(lista):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Imprime cada número de lista em um linha,</span>
<span style="color: #BA2121; font-style: italic">    com duas casas decimais&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">for</span> valor <span style="color: #AA22FF; font-weight: bold">in</span> lista:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;</span><span style="color: #BB6688; font-weight: bold">{valor:.2f}</span><span style="color: #BA2121">&quot;</span>)

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">obter_maximo</span>(lista):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve o valor máximo da lista&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">assert</span> lista, <span style="color: #BA2121">&quot;Lista não pode ser vazia&quot;</span>
    maximo <span style="color: #666666">=</span> lista[<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">for</span> numero <span style="color: #AA22FF; font-weight: bold">in</span> lista:
        <span style="color: #008000; font-weight: bold">if</span> numero <span style="color: #666666">&gt;</span> maximo:
            maximo <span style="color: #666666">=</span> numero
    <span style="color: #008000; font-weight: bold">return</span> maximo

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">criar_lista_normalizada</span>(lista_antiga):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve uma nova lista com os elementos</span>
<span style="color: #BA2121; font-style: italic">    de lista_antiga normalizados pelo máximo&quot;&quot;&quot;</span>
    maximo <span style="color: #666666">=</span> obter_maximo(lista_antiga)
    lista_nova <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> valor <span style="color: #AA22FF; font-weight: bold">in</span> lista_antiga:
        novo_valor <span style="color: #666666">=</span> valor <span style="color: #666666">/</span> maximo
        lista_nova<span style="color: #666666">.</span>append(novo_valor)
    <span style="color: #008000; font-weight: bold">return</span> lista_nova

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">calcular_medias_finais</span>(notas_provas, notas_exercicios):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve uma nova lista com as médias geométricas</span>
<span style="color: #BA2121; font-style: italic">    dos elementos de notas_provas e notas_exercicios&quot;&quot;&quot;</span>
    medias_finais <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(notas_provas) <span style="color: #666666">==</span> <span style="color: #008000">len</span>(notas_exercicios), \
           <span style="color: #BA2121">&quot;As listas de notas devem ter o mesmo tamanho&quot;</span>
    n <span style="color: #666666">=</span> <span style="color: #008000">len</span>(notas_provas)
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        media_final <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(notas_provas[i] <span style="color: #666666">*</span> notas_exercicios[i])
        medias_finais<span style="color: #666666">.</span>append(media_final)
    <span style="color: #008000; font-weight: bold">return</span> medias_finais

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    n <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">input</span>(n))
    notas_provas <span style="color: #666666">=</span> ler_lista_numeros(n)
    notas_exercicios <span style="color: #666666">=</span> ler_lista_numeros(n)

    notas_provas <span style="color: #666666">=</span> criar_lista_normalizada(notas_provas)
    notas_exercicios <span style="color: #666666">=</span> criar_lista_normalizada(notas_exercicios)

    medias_finais <span style="color: #666666">=</span> calcular_medias_finais(notas_provas, notas_exercicios)
    imprimir_lista_numeros(medias_finais)

main()
</pre><p>Há vários detalhe nesse programas e talvez alguns sejam novos para
você. Você deve pesquisar as instruções que não conhecer e descobrir o
objetivo de elas estarem ali. O que queremos destacar nesse exemplo,
no entanto, é a forma como está organizado. É uma boa prática (embora
nem sempre seja seguida no mercado) criar programas bem documentados e
com formatação padronizada, como acima. O programa acima está
organizado de acordo com algumas convenções:</p>
<ol>
<li>O programa começa com um comentário descrevendo o que ele faz. No
caso de Python, usamos uma string de múltiplas linhas que é mais
convenientes. Repare que a documentação descreve precisamente
como utilizar o programa.</li>
<li>Em seguida, há uma seção de <code class="language-text">import</code>. Por enquanto só conhecemos e
precisamos de uma função no módulo <code class="language-text">math</code>, mas podemos ter uma
sequência bem grande de instruções desse tipos quando tivermos
programas mais complexos que precisam de mais bibliotecas.</li>
<li>Logo em seguida há uma sequência de funções auxiliares para se
resolver nosso problema, cada uma bem documentada. As funções estão
organizadas nessa ordem não por acaso. Nesse nosso exemplo,
primeiro estão as funções mais gerais (de entrada e saída) e depois
funções mais específicas para nosso problema. Cada desenvolvedor
(ou grupo) normalmente adota uma estratégia particular.</li>
<li>Por último, vem a função principal, denominada <code class="language-text">main</code>, seguida de
uma chamada para ela. O programa começa a executar por ali e a
maioria dos programadores também começará a ler programas a partir
da função <code class="language-text">main</code>.</li>
</ol>
<h1 id="escopo-de-variaveis-e-ciclo-de-vida-de-funcoes">Escopo de variáveis e ciclo de vida de funções</h1>
<p>Quando aprendemos a instrução de atribuição, vimos que ela
tem a seguinte forma</p>
<pre class="highlight">&lt;nome de variável&gt; = &lt;expressão que computa um valor na memória&gt;
</pre><p>Assim, o nome do lado esquerdo deve ser um nome que referencia algum
valor armazenado na memória. Essa associação, no jargão de Python é
chamada de <strong>binding</strong>. Uma vez definido o binding, podemos usar
o nome da variável em um expressão para representar o valor
referenciado. O nome de uma variável, no entanto, só pode ser usado
quando satisfeitas determinadas condições:</p>
<ol>
<li>
<p>A atribuição correspondente ao binding tiver sido executada <em>antes</em>
do uso da variável. Se houver mais de uma atribuição correspondente
ao mesmo nome, então o nome corresponderá ao último valor
referenciado.</p>
</li>
<li>
<p>O nome da variável ser visível dentro do <em>escopo</em> em que foi
criada. O escopo de uma variável é um conjunto de nomes de
variáveis correspondentes a uma região do código bem definida. Uma
atribuição <strong>sempre</strong> corresponde ao nome do escopo atual.</p>
</li>
</ol>
<p>Vamos estudar dois tipos de escopo.</p>
<ul>
<li>
<p><strong>Escopo global:</strong> O escopo global é criado quando o interpretador
Python inicia a execução de seu programa. São adicionados ao escopo
global nome definidos diretamente no programa, que não estejam no
corpo de nenhuma função. Essas variáveis são visíveis em qualquer
parte do seu programa.</p>
</li>
<li>
<p><strong>Escopo de função:</strong> O escopo de uma função é criado somente quando
uma função é chamada. São adicionados ao escopo dessa chamada os
nomes definidos dentro do corpo da função. Essas variáveis são
visíveis apenas dentro do corpo da função.</p>
</li>
</ul>
<p>Para deixar esses conceitos um pouco mais concretos, vejamos um
exemplo de código:</p>
<pre class="highlightlanguage-python">PI <span style="color: #666666">=</span> <span style="color: #666666">3.141592653589793</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">calcular_area_disco</span>(raio):
    raio_quadrado <span style="color: #666666">=</span> raio <span style="color: #666666">**</span> <span style="color: #666666">2</span>
    area <span style="color: #666666">=</span> PI <span style="color: #666666">*</span> raio_quadrado

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">calcular_volume_esfera</span>(raio):
    raio_cubo <span style="color: #666666">=</span> raio <span style="color: #666666">**</span> <span style="color: #666666">3</span>
    volume <span style="color: #666666">=</span> <span style="color: #666666">4.0/3.0</span> <span style="color: #666666">*</span> PI <span style="color: #666666">*</span> raio_cubo
    <span style="color: #008000; font-weight: bold">return</span> volume

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    raio <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>(<span style="color: #BA2121">&quot;Digite o raio de uma esfera: &quot;</span>))
    peso <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>(<span style="color: #BA2121">&quot;Digite o peso dessa esfera: &quot;</span>))

    volume <span style="color: #666666">=</span> calcular_volume_esfera(raio)
    densidade <span style="color: #666666">=</span> peso <span style="color: #666666">/</span> volume

    <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;A densidade da esfera á </span><span style="color: #BB6688; font-weight: bold">{densidade}</span><span style="color: #BA2121">&quot;</span>)

main()
</pre><p>Existe uma única variável global denominada <code class="language-text">PI</code>. Essa variável pode
ser utilizada em qualquer ponto do programa que execute após sua
definição. Observe quem ambas as funções <code class="language-text">calcular_area_disco</code> e
<code class="language-text">calcular_area_disco</code> fazem uso de <code class="language-text">PI</code>.</p>
<p>As variáveis locais de <code class="language-text">calcular_area_disco</code> são o parâmetro <code class="language-text">raio</code> e
as demais variáveis <code class="language-text">raio_quadrado</code> e <code class="language-text">area</code>. Analogamente, as
variáveis locais de <code class="language-text">calcular_volume_esfera</code> são <code class="language-text">raio</code>, <code class="language-text">raio_cubo</code> e
<code class="language-text">volume</code>. Finalmente, as variáveis locais de <code class="language-text">main</code> são <code class="language-text">raio</code>,
<code class="language-text">peso</code>, <code class="language-text">volume</code> e <code class="language-text">densidade</code>.</p>
<p>Cada função <em>enxerga</em> apenas as variáveis globais e suas variáveis
locais! Assim, o nome <code class="language-text">raio_cubo</code> não está no escopo de <code class="language-text">main</code> nem de
<code class="language-text">calcular_area_disco</code>. Mas e os nomes de variáveis que são comuns a
mais de uma função? Cada função têm suas próprias variáveis locais,
assim há três nomes <code class="language-text">raio</code> distintos. Você pode pensar que há o
<code class="language-text">raio</code>-da-função-<code class="language-text">calcular_area_disco</code>, o
<code class="language-text">raio</code>-da-função-<code class="language-text">calcular_volume_esfera</code> e o <code class="language-text">raio</code>-da-função-<code class="language-text">main</code>.
O mesmo acontece para a variável <code class="language-text">volume</code> que é comum a
<code class="language-text">calcular_volume_esfera</code> e <code class="language-text">main</code>.</p>
<p>Para entender melhor, façamos um exercício. O que será
impresso pelo programa a seguir:</p>
<pre class="highlightlanguage-python">INCREMENTO <span style="color: #666666">=</span> <span style="color: #666666">3</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">somar</span>(x):
    x <span style="color: #666666">=</span> x <span style="color: #666666">+</span> INCREMENTO

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    x <span style="color: #666666">=</span> <span style="color: #666666">10</span>
    somar(x)
    <span style="color: #008000">print</span>(x)

main()
</pre><p>Você deve ter respondido correto: <code class="language-text">10</code>. Embora ambas funções <code class="language-text">somar</code> e
<code class="language-text">main</code> tenham uma variável de nome <code class="language-text">x</code>, elas são nomes que se referem
a variáveis distintas.</p>
<p>Fazemos uma modificação. O que será impresso?</p>
<pre class="highlightlanguage-python">INCREMENTO <span style="color: #666666">=</span> <span style="color: #666666">3</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">somar</span>(x):
    x <span style="color: #666666">=</span> x <span style="color: #666666">+</span> INCREMENTO
    <span style="color: #008000; font-weight: bold">return</span> x

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    x <span style="color: #666666">=</span> <span style="color: #666666">10</span>
    soma1 <span style="color: #666666">=</span> somar(x)
    INCREMENTO <span style="color: #666666">=</span> <span style="color: #666666">4</span>
    soma2 <span style="color: #666666">=</span> somar(x)
    <span style="color: #008000">print</span>(soma1)
    <span style="color: #008000">print</span>(soma2)

main()
</pre><p>Agora o valor calculado pela primeira chamada de <code class="language-text">somar</code> foi devolvido
e armazenado em um variável referenciada por <code class="language-text">soma1</code> e o valor
calculado pela segunda chamada em <code class="language-text">soma2</code>. Nesse caso, não é tão
simples descobrir o que será impresso. Se você simular esse programa,
obterá <code class="language-text">13</code> e <code class="language-text">13</code>. Por que não foi impresso <code class="language-text">13</code> e <code class="language-text">14</code>? Sabemos que
<code class="language-text">somar</code> depende da variável global <code class="language-text">INCREMENTO</code>, mas a função <code class="language-text">main</code>
faz uma atribuição a uma variável local <code class="language-text">INCREMENTO</code>. Lembrem-se de
que atribuições feitas em funções são sempre locais!</p>
<p>Por esse motivo (e por alguns outros que você ainda vai descobrir),
nunca use ou faça modificações em variáveis globais! Repetindo: nunca!
A única razão para usarmos uma variável global é para dar um nome a um
valor que nunca deverá ser mudado durante a execução do algoritmo.
Chamamos essas variáveis de <strong>constantes</strong>. Aliás, é por esse motivo
que convencionamos escrever todas as variáveis globais em maiúsculas,
para indicar que elas são constantes e não devem ser alteradas.</p>
<p>Para descobrir o que está acontecendo internamente no interpretador
Python, precisamos entender o ciclo de vida de uma função. Para isso,
vamos fazer mais um exercício.</p>
<blockquote>
<p>Crie um programa que leia a lista de notas dos estudantes e
normalize as notas de forma que a maior seja 10. Em seguida,
determine para cada estudante da lista se ele foi aprovado.</p>
</blockquote>
<p>Experimente resolver esse exercício. Para os impacientes, segue
o código que eu faria:</p>
<pre class="highlightlanguage-python">NOTA_MINIMA <span style="color: #666666">=</span> <span style="color: #666666">5.0</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">obter_maximo</span>(lista):
    <span style="color: #008000; font-weight: bold">assert</span> lista, <span style="color: #BA2121">&quot;Lista não pode ser vazia&quot;</span>
    maximo <span style="color: #666666">=</span> lista[<span style="color: #666666">0</span>]
    <span style="color: #008000; font-weight: bold">for</span> valor <span style="color: #AA22FF; font-weight: bold">in</span> lista:
        <span style="color: #008000; font-weight: bold">if</span> maximo <span style="color: #666666">&lt;</span> valor:
            maximo <span style="color: #666666">=</span> valor
    <span style="color: #408080; font-style: italic"># breakpoint()</span>
    <span style="color: #008000; font-weight: bold">return</span> maximo

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">multiplicar_fator</span>(lista, fator):
    n <span style="color: #666666">=</span> <span style="color: #008000">len</span>(lista)
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        lista[i] <span style="color: #666666">=</span> lista[i] <span style="color: #666666">*</span> fator

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ler_lista_notas</span>():
    n <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">input</span>(<span style="color: #BA2121">&quot;Digite o número de estudantes: &quot;</span>))
    lista_notas <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> _ <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        lista_notas<span style="color: #666666">.</span>append(<span style="color: #008000">float</span>(<span style="color: #008000">input</span>()))
    <span style="color: #008000; font-weight: bold">return</span> lista_notas

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">imprimir_lista_aprovacao</span>(lista_notas):
    <span style="color: #008000; font-weight: bold">for</span> nota <span style="color: #AA22FF; font-weight: bold">in</span> lista_notas:
        <span style="color: #008000; font-weight: bold">if</span> nota <span style="color: #666666">&lt;</span> NOTA_MINIMA:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;reprovado&quot;</span>)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;aprovado&quot;</span>)

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    lista_notas <span style="color: #666666">=</span> ler_lista_notas()

    maximo <span style="color: #666666">=</span> obter_maximo(lista_notas)
    fator <span style="color: #666666">=</span> <span style="color: #666666">10.0</span> <span style="color: #666666">/</span> maximo
    multiplicar_fator(lista_notas, fator)

    imprimir_lista_aprovacao(lista_notas)

main()
</pre><p>Vamos fazer um desenho representando a memória do computador no
momento imediatamente anterior em que <code class="language-text">obter_maximo</code> devolve o
valor máximo da lista.</p>
<img src="figs/escopo_obter_maximo.png" style="width: 100%; max-width: 500px;">
<p>Há varias coisas a se notar. Nesse momento, a função <code class="language-text">ler_lista_notas</code>
já foi executada e terminada, então todas as variáveis locais dessa
função já não estão mais disponíveis na função, isso é, não há escopo
para as variáveis dessa função. Do mesmo modo, a função
<code class="language-text">multiplicar_fator</code> a função <code class="language-text">imprimir_lista_aprovacao</code> também não
foram chamadas ainda, e portanto suas variáveis ainda não foram
criadas.</p>
<p>Há exatamente duas funções sendo executadas nesse momento: a função
<code class="language-text">main</code> e a função <code class="language-text">obter_maximo</code>, então existem exatamente dois
escopos de função, além do escopo global.</p>
<p><strong>Opcional:</strong> Se você quiser verificar isso, faça o seguinte: descomente a
linha com <code class="language-text">breakpoint()</code> na função <code class="language-text">obter_maximo()</code> e execute o seu
programa. Você entrará no mode de debug com uma mensagem mostrando a
próxima instrução. Digite <code class="language-text">bt</code> (de backtrace) para mostrar a
trajetória do seu programa até essa instrução e explore investigando
os valores das variáveis, e.g., digite <code class="language-text">maximo</code> para ver o valor
associado a esse nome no escopo atual. Se você não gosta de usar o
terminal, então pode fazer o mesmo configurando sua IDE preferida e
adicionado um breakpoint na linha correspondente ao <code class="language-text">return</code>.</p>
<pre class="highlight">Digite o número de estudantes: 4
4.8
3.5
8.0
7.5
&gt; /home/user/ra123456/funcoes/notas.py(10)obter_maximo()
-&gt; return maximo
(Pdb) bt
  /home/user/ra123456/funcoes/notas.py(40)&lt;module&gt;()
-&gt; main()
  /home/user/ra123456/funcoes/notas.py(34)main()
-&gt; maximo = obter_maximo(lista_notas)
&gt; /home/user/ra123456/funcoes/notas.py(10)obter_maximo()
-&gt; return maximo
(Pdb) valor
7.5
(Pdb) maximo
8.0
(Pdb) continue
aprovado
reprovado
aprovado
aprovado
</pre><p>Imediatamente depois que a função <code class="language-text">obter_maximo</code> termina, o valor
referenciado na frente de <code class="language-text">return</code> é devolvido para a função <code class="language-text">main</code>.
Nesse momento, o escopo da função <code class="language-text">obter_máximo</code> é destruído. A
próxima instrução de <code class="language-text">main</code> é uma atribuição ao nome de variável
<code class="language-text">máximo</code>, que recebe o valor devolvido. Podemos olhar para a seguinte
figura:</p>
<img src="figs/escopo_obter_maximo_retorno.png" style="width: 100%; max-width: 500px;">
<p>Com isso, podemos resumir o ciclo de vida de uma função:</p>
<ol>
<li>
<p>quando uma função é <strong>chamada</strong>:</p>
<ul>
<li>criamos um novo escopo para essa chamada</li>
<li>para cada argumento, associamos os valores passados entre
parênteses</li>
<li>continuamos executando a partir da primeira instrução da função</li>
</ul>
</li>
<li>
<p>quando uma função <strong>termina</strong>:</p>
<ul>
<li>devolvemos o valor após <code class="language-text">return</code>, se houver</li>
<li>destruímos o escopo da chamada de função</li>
<li>continuamos executando a próxima instrução imediatamente após a
chamada</li>
</ul>
</li>
</ol>
<p>O mecanismo de chamadas de função em Python tem uma consequência
especial para listas passadas como argumentos. Quando alteramos uma
lista passada por argumento, essas mudanças ficarão visíveis para a
função que realizou a chamada. Isso acontece quando chamamos a função
<code class="language-text">multiplicar_fator</code>. Para ver o motivo disso, repare que tanto a
variável <code class="language-text">lista_notas</code> de <code class="language-text">main</code> quanto a variável <code class="language-text">lista</code> de
<code class="language-text">multiplicar_fator</code> são associadas à mesma lista. O desenho a seguir
representa a memória imediatamente após a primeira iteração da linha
<code class="language-text">lista[i] = lista[i] * fator</code>.</p>
<img src="figs/escopo_multiplicar_fator.png" style="width: 100%; max-width: 500px;">
<h1 id="modulos">Módulos</h1>
<p><strong>Observação:</strong> Depois de ler o texto a seguir, procure ler e estudar
a seção 6 do tutorial Python.</p>
<p>À medida em que nossos projetos ficam maiores e mais complexos, copiar
e colar um conjunto de funções em nossos arquivos Python torna-se
bastante difícil. Mais dos que isso, pode ser que um conjunto de
funções possa ser útil a diferentes programas. A maneira de tratar
isso no universo Python é criando-se <strong>módulos</strong>, que agrupam um
conjunto de funções e variáveis relacionadas.</p>
<p>Um módulo é um arquivo Python que é executado quando executamos
o comando <code class="language-text">import</code>. Os módulos podem vir de várias partes,
dependendo de como foram instalados:</p>
<ol>
<li>Já vimos um exemplo de módulo quando digitamos <code class="language-text">import math</code>. Esse
módulo é um módulo da biblioteca padrão Python, o que significa que
está disponível em qualquer instalação Python.</li>
<li>Também há módulos adicionais instalados no sistema, que são
responsáveis por tarefas comuns, mas de domínios específicos, como
manipulação de imagens, comunicação com a Internet, computação
científica, etc.</li>
<li>Finalmente, há módulos pessoais, que são aqueles criados pelo
próprio desenvolvedor para seus próprios projetos.</li>
</ol>
<p>Por enquanto, só iremos falar em como criar um módulo pessoal.
Para isso, vamos ver um exemplo.</p>
<blockquote>
<p>Em uma determinada disciplina, há 2 exercícios. A média parcial de
um estudante é dada pela média geométrica das notas dos exercícios.
Escreva um programa que leia as listas de notas de exercicios e
mostre a lista de notas parciais.</p>
</blockquote>
<p>Isso é bem parecido com o que já fizemos, então nada melhor do que
copiar e colar algumas funções auxiliares. Copiamos
<code class="language-text">ler_lista_numeros</code> e <code class="language-text">imprimir_lista_numeros</code>. Para calcular as
médias, já temos uma função que faz isso, <code class="language-text">calcular_medias_finais</code>,
mas melhor ajustar os nomes, para não nos confundirmos. Com isso,
escrevemos um programa chamado <code class="language-text">notas_parciais.py</code>.</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ler_lista_numeros</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Lê uma lista de n números do teclado&quot;&quot;&quot;</span>
    lista <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> _ <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        numero <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        lista<span style="color: #666666">.</span>append(numero)
    <span style="color: #008000; font-weight: bold">return</span> lista

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">imprimir_lista_numeros</span>(lista):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Imprime cada número de lista em um linha,</span>
<span style="color: #BA2121; font-style: italic">    com duas casas decimais&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">for</span> valor <span style="color: #AA22FF; font-weight: bold">in</span> lista:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;</span><span style="color: #BB6688; font-weight: bold">{valor:.2f}</span><span style="color: #BA2121">&quot;</span>)

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">calcular_medias_geometricas</span>(lista1, lista2):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve uma nova lista com as médias geométricas</span>
<span style="color: #BA2121; font-style: italic">    dos elementos de lista1 e lista2&quot;&quot;&quot;</span>
    medias_geometricas <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(lista1) <span style="color: #666666">==</span> <span style="color: #008000">len</span>(lista2), <span style="color: #BA2121">&quot;As listas de devem ter o mesmo tamanho&quot;</span>
    n <span style="color: #666666">=</span> <span style="color: #008000">len</span>(lista1)
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        media_geometrica <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(lista1[i] <span style="color: #666666">*</span> lista2[i])
        medias_geometricas<span style="color: #666666">.</span>append(media_geometrica)
    <span style="color: #008000; font-weight: bold">return</span> medias_geometricas

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    n <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">input</span>())
    notas_exercicios1 <span style="color: #666666">=</span> ler_lista_numeros(n)
    notas_exercicios2 <span style="color: #666666">=</span> ler_lista_numeros(n)
    medias_parciais <span style="color: #666666">=</span> calcular_medias_geometricas(notas_exercicios1, notas_exercicios2)
    imprimir_lista_numeros(medias_parciais)

main()
</pre><p>Repare que, enquanto nesse programa resolvemos o problema de repetição
de código, afinal, só definimos <code class="language-text">ler_lista_numeros</code> uma vez, temos que
escrever exatamente as mesmas instruções que estavam em outro programa
anterior. Nessas situações, é mais conveniente criar um <strong>módulo</strong> que
possa ser compartilhado entre os dois programas. Primeiro, criamos um
arquivo, no mesmo diretório, chamado <code class="language-text">utilidades.py</code> e movemos as
funções utilitárias para lá:</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ler_lista_numeros</span>(n):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Lê uma lista de n números do teclado&quot;&quot;&quot;</span>
    lista <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> _ <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        numero <span style="color: #666666">=</span> <span style="color: #008000">float</span>(<span style="color: #008000">input</span>())
        lista<span style="color: #666666">.</span>append(numero)
    <span style="color: #008000; font-weight: bold">return</span> lista

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">imprimir_lista_numeros</span>(lista):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Imprime cada número de lista em um linha,</span>
<span style="color: #BA2121; font-style: italic">    com duas casas decimais&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">for</span> valor <span style="color: #AA22FF; font-weight: bold">in</span> lista:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">f&quot;</span><span style="color: #BB6688; font-weight: bold">{valor:.2f}</span><span style="color: #BA2121">&quot;</span>)

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">calcular_medias_geometricas</span>(lista1, lista2):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve uma nova lista com as médias geométricas</span>
<span style="color: #BA2121; font-style: italic">    dos elementos de lista1 e lista2&quot;&quot;&quot;</span>
    medias_geometricas <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(lista1) <span style="color: #666666">==</span> <span style="color: #008000">len</span>(lista2), <span style="color: #BA2121">&quot;As listas de devem ter o mesmo tamanho&quot;</span>
    n <span style="color: #666666">=</span> <span style="color: #008000">len</span>(lista1)
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        media_geometrica <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(lista1[i] <span style="color: #666666">*</span> lista2[i])
        medias_geometricas<span style="color: #666666">.</span>append(media_geometrica)
    <span style="color: #008000; font-weight: bold">return</span> medias_geometricas
</pre><p>Com isso podemos modificar nosso arquivo <code class="language-text">notas_parciais.py</code> para conter
apenas:</p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">utilidades</span> <span style="color: #008000; font-weight: bold">import</span> ler_lista_numeros, imprimir_lista_numeros, calcular_medias_geometricas

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    n <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">input</span>())
    notas_exercicios1 <span style="color: #666666">=</span> ler_lista_numeros(n)
    notas_exercicios2 <span style="color: #666666">=</span> ler_lista_numeros(n)
    medias_parciais <span style="color: #666666">=</span> calcular_medias_geometricas(notas_exercicios1, notas_exercicios2)
    imprimir_lista_numeros(medias_parciais)

main()
</pre><p>A primeira linha desse programa faz o seguinte:</p>
<ol>
<li>procura o módulo chamado <code class="language-text">utilidades</code> na sua lista de módulos
e encontrar um arquivo <code class="language-text">utilidades.py</code>;</li>
<li>executa todas as instruções nesse módulo; nesse caso, há apenas
instruções de definição de funções;</li>
<li>torna disponível no escopo global do programa (<code class="language-text">notas_parciais.py</code>)
os nomes das funções selecionadas.</li>
</ol>
<p>Agora, essa as funções podem ser utilizadas em vários programas, mas
sem a necessidade de copiar e colar. Por exemplo, suponha que, no
final do semestre, tenhamos que escrever outro programa.</p>
<blockquote>
<p>Além dos exercícios, há uma prova. A média final da disciplina é
dada pela média <strong>aritmética</strong> entre a média parcial e a nota da
prova. Escreva um programa que leia as listas de notas marciais e
das provas e mostre a lista de notas finais.</p>
</blockquote>
<p>Podemos, agora escrever o seguinte programa, <code class="language-text">notas_finais.py</code></p>
<pre class="highlightlanguage-python"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">utilidades</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">calcular_medias_aritmeticas</span>(lista1, lista2):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Devolve uma nova lista com as médias aritméticas</span>
<span style="color: #BA2121; font-style: italic">    dos elementos de lista1 e lista2&quot;&quot;&quot;</span>
    medias_aritmeticas <span style="color: #666666">=</span> []
    <span style="color: #008000; font-weight: bold">assert</span> <span style="color: #008000">len</span>(lista1) <span style="color: #666666">==</span> <span style="color: #008000">len</span>(lista2), <span style="color: #BA2121">&quot;As listas de devem ter o mesmo tamanho&quot;</span>
    n <span style="color: #666666">=</span> <span style="color: #008000">len</span>(lista1)
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        media_aritmetica <span style="color: #666666">=</span> (lista1[i] <span style="color: #666666">+</span> lista2[i]) <span style="color: #666666">/</span> <span style="color: #666666">2</span>
        medias_aritmeticas<span style="color: #666666">.</span>append(media_aritmetica)
    <span style="color: #008000; font-weight: bold">return</span> medias_aritmeticas

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    n <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">input</span>())
    notas_exercicios1 <span style="color: #666666">=</span> utilidades<span style="color: #666666">.</span>ler_lista_numeros(n)
    notas_exercicios2 <span style="color: #666666">=</span> utilidades<span style="color: #666666">.</span>ler_lista_numeros(n)
    medias_parciais <span style="color: #666666">=</span> calcular_medias_aritmeticas(notas_exercicios1, notas_exercicios2)
    utilidades<span style="color: #666666">.</span>imprimir_lista_numeros(medias_parciais)

main()
</pre><p>Observe que agora utilizamos uma sintaxe alternativa para importar o
módulo. O módulo <code class="language-text">utilidades.py</code> continua sendo executado e importado
como antes. A única diferença é que o nome da função
<code class="language-text">ler_lista_numeros</code> e demais não estarão disponíveis no escopo global
do nosso programa. Ao invés disso, estará disponível o nome
<code class="language-text">utilidades</code>, por onde acessamos as funções do módulo.</p>
<p>Finalmente, repare que a função auxiliar <code class="language-text">calcular_medias_aritmeticas</code>
que tivemos que criar é suficientemente genérica e pode ser que ela
seja útil em outro programa. Assim, pode ser razoável movê-la para o
módulo de utilidades. Faça isso como exercício. A decisão de quando
uma função deve estar disponível em um módulo para reuso ou mesmo como
organizar os módulos não é trivial. Só com a experiência você ganhará
mais confiança para essa tarefa.</p>


        <!-- Navigation buttons -->
<div role="navigation" class="row justify-content-between">

  <div class="col-12 col-sm-5 col-lg-4">
    <a class="btn btn-primary w-100 mt-1 mt-sm-0" href="05-listas.html">
      &larr; Anterior
    </a>
  </div>

  <div class="col-12 d-none d-lg-inline-block col-lg-4">
    <a class="btn btn-secondary w-100" href="../index.html">
      Voltar
    </a>
  </div>

  <div class="col-12 col-sm-5 col-lg-4">
    <a class="btn btn-primary w-100 mt-1 mt-sm-0" href="07-algortimos-iterativos.html">
      Próxima &rarr;
    </a>
  </div>

</div>      </div>
    </div>
</article>

<hr />


<!-- Footer -->
<footer>
  <p class="copyright text-muted">
    <a href="https://www.ic.unicamp.br/~lehilton/" title="Página pessoal">
      Copyright &copy; 2020
    </a>
  </p>
</footer>
<!-- Bootstrap core JavaScript -->
<script src="../dist/vendor/jquery/jquery.min.js"></script>
<script src="../dist/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- <script src="../dist/vendor/prism/prism.js"></script> -->

<!-- Custom scripts for this template -->
<script src="../dist/js/main.min.js"></script>

<!-- Mathjax setup -->
<script>
  MathJax = {
    tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
  };
</script>
<script src="../dist/vendor/mathjax/tex-chtml.js" id="MathJax-script" async></script>



  </body>

</html>